<!DOCTYPE html>
<html>
    <head>
        <title>A1 PokeAPI</title>
        <link rel="stylesheet" href="index.css">
    </head>
    <body>
        <div id="content">
            <header>
                <h1><a href="../index.html">PokeAPI Client</a></h1>
                <form action="pokemon.html">
                    <input type="text" id="search" name="search" placeholder="Search by name..." value="" />
                    <button type="button" onclick="window.search()">Search</button>
                </form>
            </header>
            <div id="pokemons">
                <div class="pokemonContainer" onclick="search(this.querySelector('.pokemonName').innerHTML)">
                    <h2 class="pokemonName"></h2>
                    <img class="pokemonArt"/>
                    <div class="pokemonStats">
                        <div class="types">
                            <p class="type">TYPE: </p><br><br>
                        </div>
                        <p class="hp">HP: </p>
                        <p class="att">ATT: </p>
                        <p class="def">DEF: </p>
                        <p class="sat">SAT: </p>
                        <p class="spd">SPD: </p>
                    </div>
                </div>
                <div class="pokemonContainer" onclick="search(this.querySelector('.pokemonName').innerHTML)">
                    <h2 class="pokemonName"></h2>
                    <img class="pokemonArt"/>
                    <div class="pokemonStats">
                        <div class="types">
                            <p class="type">TYPE: </p><br><br>
                        </div>
                        <p class="hp">HP: </p>
                        <p class="att">ATT: </p>
                        <p class="def">DEF: </p>
                        <p class="sat">SAT: </p>
                        <p class="spd">SPD: </p>
                    </div>
                </div>
                <div class="pokemonContainer" onclick="search(this.querySelector('.pokemonName').innerHTML)">
                    <h2 class="pokemonName"></h2>
                    <img class="pokemonArt"/>
                    <div class="pokemonStats">
                        <div class="types">
                            <p class="type">TYPE: </p><br><br>
                        </div>
                        <p class="hp">HP: </p>
                        <p class="att">ATT: </p>
                        <p class="def">DEF: </p>
                        <p class="sat">SAT: </p>
                        <p class="spd">SPD: </p>
                    </div>
                </div>
            </div>
        </div>
        <script src="./pokeApiStuff.js"></script>
        <script>
            function search() {
                if (document.querySelector("#search").value == "") { return; }
                window.location.assign("./pokemon.html?search=" + document.querySelector("#search").value);
            }

            function search(pokerman) {
                window.location.assign("./pokemon.html?search=" + pokerman);
            }

            function fillRandomPokemons() {
                response = getRandomPokemon();

                let pokes = document.querySelectorAll(".pokemonContainer");
                for (let i = 0; i < 3; i++) {
                    response = getRandomPokemon();
                    pokes[i].querySelector(".pokemonArt").setAttribute("src", getPokemonArtUrl(response));
                    pokes[i].querySelector(".pokemonName").innerHTML = getPokemonName(response);

                    let stats = getPokemonStats(response);
                    pokes[i].querySelector(".hp").innerHTML += stats[0]["base_stat"];
                    pokes[i].querySelector(".att").innerHTML += stats[1]["base_stat"];
                    pokes[i].querySelector(".def").innerHTML += stats[2]["base_stat"];
                    pokes[i].querySelector(".sat").innerHTML += stats[4]["base_stat"];
                    pokes[i].querySelector(".spd").innerHTML += stats[5]["base_stat"];

                    pokes[i].querySelector(".type").innerHTML += response["types"][0]["type"]["name"];
                }
            }

            fillRandomPokemons();
        </script>
    </body>
</html>